name: Node.js CI/CD

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Install dependencies
      run: npm install
    - name: Build
      run: bash ./run build
    - name: Test
      env:
        GITHUB_TOKEN: ${{ secrets.WILLIAMS_KEY }}
      run: bash ./run test

  # deploy:
  #   needs: build
  #   runs-on: ubuntu-latest

  #   steps:
  #   - name: Deploy to server
  #     uses: easingthemes/ssh-deploy@v2.2.12
  #     with:
  #       ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}
  #       ssh-public-key: ${{ secrets.SSH_PUBLIC_KEY }}
  #       remote_host: ${{ secrets.REMOTE_HOST }}
  #       remote_user: ${{ secrets.REMOTE_USER }}
  #       remote_path: ${{ secrets.REMOTE_PATH }}
